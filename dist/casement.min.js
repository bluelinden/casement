/*! For license information please see casement.min.js.LICENSE.txt */
!function(e,s){"object"==typeof exports&&"object"==typeof module?module.exports=s():"function"==typeof define&&define.amd?define([],s):"object"==typeof exports?exports.casement=s():e.casement=s()}(self,(()=>(()=>{var e={607:function(e,s,t){var n,a,i,o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};!function(o){if("object"==typeof e.exports){var r=o(t(875),s);void 0!==r&&(e.exports=r)}else a=[t,s,t(899),t(719)],void 0===(i="function"==typeof(n=o)?n.apply(s,a):n)||(e.exports=i)}((function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});const t=o(e("./inside")),n=o(e("./outside")),a={Inside:t.default,Outside:n.default};s.default=a}))},899:(e,s,t)=>{var n,a,i;!function(o){if("object"==typeof e.exports){var r=o(t(875),s);void 0!==r&&(e.exports=r)}else a=[t,s],void 0===(i="function"==typeof(n=o)?n.apply(s,a):n)||(e.exports=i)}((function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=class{init(){window.addEventListener("message",(e=>{this.handleIncoming})),window.parent.postMessage({type:"casement-inside-ready",name:this.name},this.allowedDomain)}send(e){return new Promise(((s,t)=>{window.parent.postMessage({type:"casement-inside-message",message:e},this.allowedDomain)}))}request(e){return new Promise((s=>{window.parent.postMessage({type:`casement-${this.name}-inside-request`,transmissionID:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),message:e},this.allowedDomain);const t=n=>{n.origin===this.allowedDomain&&n.data.type===`casement-${this.name}-outside-response`&&n.data.transmissionID===e.transmissionID&&(window.removeEventListener("message",t),s(n.data.message))};window.addEventListener("message",t)}))}handleIncoming(e){e.origin===this.allowedDomain&&(e.data.type===`casement-${this.name}-outside-message`&&(this.onMessage?this.onMessage(e.data.message):console.warn('Casement Error: Received a message from outside but no handler was set. Remember to pass a handler function to the "onMessage" option when creating a new casement.Inside instance.')),e.data.type===`casement-${this.name}-outside-request`&&(this.onMessage?window.parent.postMessage({type:`casement-${this.name}-inside-response`,message:this.onMessage(e.data.message)},this.allowedDomain):console.warn('Casement Error: Received a request from outside but no handler was set. Remember to pass a handler function to the "onMessage" option when creating a new casement.Inside instance.')))}constructor(e){this.name=e.name,this.allowedDomain=e.allowedDomain,e.onReady&&(this.onReady=e.onReady),e.onMessage&&(this.onMessage=e.onMessage),this.init()}}}))},719:(e,s,t)=>{var n,a,i;!function(o){if("object"==typeof e.exports){var r=o(t(875),s);void 0!==r&&(e.exports=r)}else a=[t,s],void 0===(i="function"==typeof(n=o)?n.apply(s,a):n)||(e.exports=i)}((function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=class{init(){window.addEventListener("message",(e=>{this.handleIncoming}))}send(e){this.allowSend?this.iFrame.contentWindow.postMessage({type:"casement-outside-message",message:e},this.allowedDomain):console.warn("Casement Error: Cannot send message. The iFrame has not yet loaded, or has not yet confirmed that it is ready.")}request(e){if(this.allowSend)return new Promise((s=>{this.iFrame.contentWindow.postMessage({type:`casement-${this.name}-outside-request`,transmissionID:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),message:e},this.allowedDomain);const t=n=>{n.origin===this.allowedDomain&&n.data.type===`casement-${this.name}-inside-response`&&n.data.transmissionID===e.transmissionID&&(window.removeEventListener("message",t),s(n.data.message))};window.addEventListener("message",t)}));console.warn("Casement Error: Cannot send message. The iFrame has not yet loaded, or has not yet confirmed that it is ready.")}handleIncoming(e){if(e.origin===this.allowedDomain)switch(e.data.type){case`casement-${this.name}-inside-ready`:this.allowSend=!0,this.onReady&&this.onReady();break;case`casement-${this.name}-inside-message`:this.onMessage?this.onMessage(e.data.message):console.warn('Casement Error: Received a message from inside but no handler was set. Remember to pass a handler function to the "onMessage" option when creating a new casement.Outside instance.');break;case`casement-${this.name}-inside-request`:this.onMessage?window.parent.postMessage({type:`casement-${this.name}-outside-response`,message:this.onMessage(e.data.message)},this.allowedDomain):console.warn('Casement Error: Received a request from inside but no handler was set. Remember to pass a handler function to the "onMessage" option when creating a new casement.Outside instance.')}}kill(e=!1){this.onKill&&this.onKill(),this.iFrame.contentWindow.postMessage({type:"casement-outside-kill"},this.allowedDomain);const s=e=>{e.origin===this.allowedDomain&&"casement-inside-kill-ready"===e.data.type&&(this.iFrame.remove(),window.removeEventListener("message",s))};e?e&&this.iFrame.remove():window.addEventListener("message",s)}constructor(e){this.allowSend=!1,this.name=e.name,this.pageUrl=e.pageUrl||"/",this.allowedDomain=this.pageUrl.split("/").slice(0,3).join("/"),e.onReady&&(this.onReady=e.onReady),e.onMessage&&(this.onMessage=e.onMessage),e.container?(this.container=e.container,this.iFrame=document.createElement("iframe"),this.iFrame.src=this.pageUrl,this.container.appendChild(this.iFrame)):e.iFrame&&(this.iFrame=e.iFrame),this.init()}}}))},875:e=>{function s(e){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}s.keys=()=>[],s.resolve=s,s.id=875,e.exports=s}},s={};function t(n){var a=s[n];if(void 0!==a)return a.exports;var i=s[n]={exports:{}};return e[n].call(i.exports,i,i.exports,t),i.exports}return t.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),t(607)})()));